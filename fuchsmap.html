<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>

    <script type="text/javascript" charset="utf-8">

   document.addEventListener("deviceready", onDeviceReady, false);

    var watchID = null;
    var userLat = null;
    var userLng = null; 

    function onDeviceReady() {
        // Update every x seconds (1 second = 1000 )
        var options = { frequency: 2000 };
        watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');

        element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                            'Longitude: ' + position.coords.longitude     + '<br />' +
                            'Timestamp: ' + new Date(position.timestamp)          + '<br />' +
                            '<hr />'      + element.innerHTML;
    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }

    </script>


    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDoX3-G4hBMoyhGuHqIciu593CmITwLaR4&sensor=true">
    </script>
    
    <script type="text/javascript">
      function initialize() {       
        var mapOptions = {
          center: new google.maps.LatLng(userLat, userLng),
          zoom: 16,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
			
		/*
		I would like to use /res/screen/mapmarker/fuchspointer.png,
		but it somehow does not appear on the maps. fuxpointer.png is the same image,
		but saved without transparency. 
		/res/screen/mapmarker/beachflag.png on the other hand was provided by Google, uses
		transparency and works fine. As long as I haven't figured that one out, I am using
		the non transparent version (fuxpointer.png). - 02.03.2013
		*/

    /* Initialising marker images */
    /* These placeholder imgaes need to be replaced as soon as the correct images are available. */
    var besserwisserPointer = 'res/screen/mapmarker/fuxpointer.png';
    var essenPointer = 'res/screen/mapmarker/beachflag.png';
    var gesundheitPointer = 'res/screen/mapmarker/beachflag.png';
    var kleidungPointer = 'res/screen/mapmarker/beachflag.png';
    var eineweltPointer = 'res/screen/mapmarker/beachflag.png';
    var ausflugPointer = 'res/screen/mapmarker/beachflag.png';

    /* fuchsmap 18 - besserwisser eG*/

		var besserwisserInfoString = '<div id="content">'+
		'<h2>besserwisser eG</h2>'+
		'<div id="bodyContent">'+
		'<p><em>Netzwerk fuer nachhaltigen Lebensstil</em><br>'+
		'Sa :: 12.00-19.00<br>'+
		'Hoellgasse 19, 94032 Passau<br>'+
		'Tel: 0851/22 74 89 21 (sa. 12.00-19.00)<br>'+
		'E-Mail: hallo(at)die-besserwisser.org<br>'+
		'zur <a href="http://www.die-besserwisser.org" target="_blank"><em>Infoseite</em></a>'+
		'</div>'+
		'</div>';

    var besserwisserinfowindow = new google.maps.InfoWindow({
        content: besserwisserInfoString
    });

    var besserwisserLatLong = new google.maps.LatLng(48.575528, 13.465749);
    var besserwisserMarker = new google.maps.Marker({
        position: besserwisserLatLong,
        map: map,
        icon: besserwisserPointer,
		    title: 'Besserwisser HQ'
    });
		
		google.maps.event.addListener(besserwisserMarker, 'click', function() {
          besserwisserinfowindow.open(map,besserwisserMarker);
    });

    /* fuchsmap 01 - Bio-Top*/

		var biotopInfoString = '<div id="content">'+
		'<h2>Bio-Top</h2>'+
		'<div id="bodyContent">'+
		'<p><em>Fachgeschaeft fuer Naturkost und Vollwertimbiss</em><br>'+
		'Grabengasse 16, 94032 Passau<br>'+
		'Tel: 0851/36321<br>'+
		'zur <a href="http://www.die-besserwisser.org" target="_blank"><em>Infoseite</em></a>'+
		'</div>'+
		'</div>';

        var biotopinfowindow = new google.maps.InfoWindow({
            content: biotopInfoString
        });
		
        var biotopLatLng = new google.maps.LatLng(48.574139,13.46132);
        var biotopMarker = new google.maps.Marker({
            position: biotopLatLng,
            map: map,
            title: 'Bio-Top',
            icon: essenPointer
        });
		
		google.maps.event.addListener(biotopMarker, 'click', function() {
          biotopinfowindow.open(map,biotopMarker);
        });

    /* fuchsmap 09 - apithekee*/
    
    var apithekeInfoString = '<div id="content">'+
    '<h2>Apitheke</h2>'+
    '<div id="bodyContent">'+
    '<p><em>Fuer die Gesundheit und die Schoenheit</em><br>'+
    'Lederergasse 54, 94032 Passau<br>'+
    'Tel: 0851/9 34 70 05<br>'+
    'zur <a href="http://www.die-besserwisser.org" target="_blank"><em>Infoseite</em></a>'+
    '</div>'+
    '</div>';

        var apithekeinfowindow = new google.maps.InfoWindow({
            content: apithekeInfoString
        });
    
        var apithekeLatLng = new google.maps.LatLng(48.569537,13.461736);
        var apithekeMarker = new google.maps.Marker({
            position: apithekeLatLng,
            map: map,
            title: 'Apitheke',
            icon: gesundheitPointer
        });
    
    google.maps.event.addListener(apithekeMarker, 'click', function() {
          apithekeinfowindow.open(map,apithekeMarker);
        });

    /* End fuchsmap 09 */  

      }
    </script>
  </head>
  <body onload="initialize()">

<!--     	<div id="map_canvas" style="width:100%; height:100%"></div> -->
    <div id="geolocation">Finding Nemo..</div>

  </body>
</html>